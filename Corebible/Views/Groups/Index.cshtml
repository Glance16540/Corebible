@model IEnumerable<Corebible.Models.CodeFirst.Groups>
@using Microsoft.AspNet.Identity;

<head>
    <style>
        tr:nth-child(even) {
            background-color: white;
        }

        tr:nth-child(odd) {
            background-color: rgb(31, 181, 172);
            color:white;
        }

        tr:nth-child(odd) a {
            color: white;
        }
    </style>
</head>

@{
    ViewBag.Title = "Index";
}

<div class="row">
    <div class="col-md-6">
        <h2>My Groups</h2>
    </div>
    <div class="col-md-6">
        <p class="pull-right">
            <a href="@Url.Action("Create", "Groups")" class="btn btn-primary">Create New Group</a>
        </p>
    </div>
</div>

<br />

<table class="table text-center">
    <tr>
        <th class="text-center">
            Group Name
        </th>
        <th class="text-center">
            No. of Members
        </th>
        <th class="text-center">
            Status
        </th>
        <th class="text-center">
            Group Owner
        </th>
        <th></th>
    </tr>

@foreach (var item in Model)
{
        <tr style="border-bottom: solid 2px rgb(31, 181, 172)">
            <td style="padding: 15px 0 15px 0">
                <a href="@Url.Action("Details", "Groups", new { id = item.Id })">
                    @Html.DisplayFor(modelItem => item.Name)
                </a>
            </td>
            @if (item.Members.Count == 0)
            {
                <td style="padding: 25px 0 15px 0">There Are No Members In This Group</td>
            }
            else
            {
                <td style="padding: 25px 0 15px 0">@item.Members.Count</td>
            }
            @if (item.Active == true)
            {
                <td style="padding: 25px 0 15px 0">
                    Active
                </td>
            }
            else
            {
                <td style="padding: 25px 0 15px 0">
                    Closed
                </td>
            }
            <td style="padding: 25px 0 15px 0">@item.Owner.FullName</td>
            <td style="padding: 25px 0 15px 0">

                @if (User.Identity.GetUserId() == item.OwnerId)
                {
                    @Html.ActionLink("Edit Group", "Edit", new { id = item.Id }) <br />
                    @Html.ActionLink("Delete Group", "Delete", new { id = item.Id }) <br />
                }

            </td>
        </tr>
}

</table>
